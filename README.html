<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DB Web SQL Tool - 專案說明文件</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .content-section {
            @apply mb-12;
        }
        .content-section h2 {
            @apply text-2xl font-bold text-gray-800 border-b-2 border-gray-200 pb-2 mb-4;
        }
        .content-section h3 {
            @apply text-xl font-semibold text-gray-700 mt-6 mb-2;
        }
        .content-section p, .content-section ul {
            @apply text-gray-600 leading-relaxed;
        }
        .content-section li {
            @apply mb-2;
        }
        .content-section code {
            @apply bg-gray-100 text-red-600 px-2 py-1 rounded-md text-sm;
        }
        .content-section pre {
            @apply bg-gray-800 text-white p-4 rounded-lg overflow-x-auto text-sm;
        }
         .feature-card {
            @apply bg-white p-4 border border-gray-200 rounded-lg;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto max-w-4xl py-12 px-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800">DB Web SQL Tool 專案說明文件</h1>
            <p class="text-lg text-gray-500 mt-2">一個功能強大且獨立的前後端資料庫查詢工具</p>
        </header>

        <div class="content-section">
            <h2>專案概覽</h2>
            <p>
                本專案是一個網頁版的 SQL 查詢工具，旨在提供一個方便、跨平台的介面，讓使用者能夠連線至多種資料庫（如 Oracle），並執行唯讀的 SQL 查詢。此工具將複雜的設定檔管理功能完全移至前端，利用瀏覽器的 `localStorage` 進行儲存，而後端則作為一個輕量、安全的代理，專注於執行資料庫查詢。
            </p>
            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 text-center">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h4 class="font-bold text-blue-800">前端技術</h4>
                    <p class="text-blue-700 text-sm">HTML, CSS, Vanilla JavaScript, jQuery, DataTables.js</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <h4 class="font-bold text-green-800">後端技術</h4>
                    <p class="text-green-700 text-sm">Python, FastAPI, Uvicorn, oracledb</p>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>前端畫面及功能特性</h2>
            <p class="mb-6">前端介面由單一 `index.html` 構成，提供豐富的互動功能，所有設定皆儲存在使用者的本機瀏覽器中，無需後端資料庫。</p>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="feature-card">
                    <h3>1. 連線設定檔管理 (localStorage)</h3>
                    <ul class="list-disc list-inside text-sm">
                        <li><b>新增/修改</b>：整合的「儲存」按鈕，可透過輸入不同名稱來建立或覆蓋設定檔。</li>
                        <li><b>刪除</b>：提供帶有確認提示的刪除功能。</li>
                        <li><b>自動載入</b>：重新整理頁面後會自動載入上次使用的設定檔。</li>
                        <li><b>多種資料庫</b>：支援 DB Type (Oracle, MS-SQL等) 及 Port 的設定。</li>
                        <li><b>排序</b>：下拉選單中的設定檔會依字母順序排列。</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>2. SQL 語句管理 (localStorage)</h3>
                    <ul class="list-disc list-inside text-sm">
                        <li><b>與 Profile 關聯</b>：每個 SQL 都與一個連線設定檔綁定。</li>
                        <li><b>新增/修改</b>：同樣使用整合的「儲存」按鈕。</li>
                        <li><b>刪除</b>：提供帶有確認提示的刪除功能。</li>
                        <li><b>排序</b>：下拉選單中的 SQL 會依字母順序排列。</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>3. 查詢執行模式</h3>
                    <ul class="list-disc list-inside text-sm">
                        <li><b>同頁查詢</b>：在當前頁面透過 AJAX 執行查詢並更新結果，適合快速驗證。</li>
                        <li><b>換頁查詢</b>：在新請求中執行查詢，保留當前頁面狀態，方便使用瀏覽器的「上一頁/下一頁」來回顧多次查詢的歷史紀錄。</li>
                        <li><b>安全傳遞</b>：換頁查詢時，連線參數透過 `sessionStorage` 傳遞，URL 中只保留無意義的 ID，提升安全性。</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>4. 查詢結果呈現</h3>
                    <ul class="list-disc list-inside text-sm">
                        <li><b>多種格式</b>：支援 Row Set, DataTables, HTML Table, JSON 四種格式切換。</li>
                        <li><b>Row Set 循環切換</b>：在 Row Set 模式下，可循環切換「正常 → 顯示 ID → 轉置」三種狀態。</li>
                        <li><b>DataTables 整合</b>：提供互動式的表格，支援排序與搜尋，並已修正預設排序問題。</li>
                        <li><b>CSV 匯出</b>：可將當前查詢結果（包含轉置後）匯出為 CSV 檔案。</li>
                    </ul>
                </div>
                 <div class="feature-card">
                    <h3>5. 使用者體驗 (UX) 優化</h3>
                    <ul class="list-disc list-inside text-sm">
                        <li><b>查詢耗時</b>：顯示每次查詢所需時間，並依秒數標示顏色。</li>
                        <li><b>本機儲存用量</b>：即時顯示 `localStorage` 的使用量。</li>
                        <li><b>清除/復原</b>：一鍵清除 SQL 輸入框，再按一次可復原回上次執行的 SQL。</li>
                        <li><b>自動捲動</b>：查詢後自動捲動至結果區，方便查看。</li>
                         <li><b>防止跳動</b>：結果區有最小高度，切換格式時畫面穩定。</li>
                        <li><b>歷史快取</b>：使用瀏覽器上一頁/下一頁時，會從 `sessionStorage` 讀取快取結果，避免重複查詢。</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>檔案結構</h2>
            <pre><code>/project-root
├── .gitignore          # Git 忽略清單
├── Dockerfile          # 用於建立後端服務的 Docker 映像檔
├── docker-compose.yml  # Docker Compose 設定檔，方便一鍵啟動
├── index.html          # 前端應用程式主體 (SPA)
├── main.py             # 後端 FastAPI 應用程式
└── requirements.txt    # Python 依賴套件清單
</code></pre>
        </div>

        <div class="content-section">
            <h2>安裝與啟動 (使用 Docker)</h2>
            <p>本專案建議使用 Docker 進行部署，可以免去在本機安裝 Python 或 Oracle Client 的複雜步驟。</p>

            <h3>事前準備</h3>
            <ul class="list-decimal list-inside">
                <li>安裝 <a href="https://git-scm.com/" target="_blank" class="text-blue-600 hover:underline">Git</a></li>
                <li>安裝 <a href="https://www.docker.com/products/docker-desktop/" target="_blank" class="text-blue-600 hover:underline">Docker Desktop</a> (已包含 Docker Compose)</li>
            </ul>

            <h3>啟動步驟</h3>
            <ol class="list-decimal list-inside mt-4 space-y-4">
                <li>
                    <p>打開您的終端機 (Terminal 或命令提示字元)，使用 git 將專案複製到您的電腦：</p>
                    <pre><code>git clone [您的專案 Git Repository URL]
cd [專案目錄]</code></pre>
                </li>
                <li>
                    <p>在專案的根目錄下，執行 Docker Compose 指令來建立並啟動服務。`--build` 參數會確保 Docker 使用最新的 `Dockerfile` 重新建立映像檔。</p>
                    <pre><code>docker-compose up --build -d</code></pre>
                    <p class="text-sm text-gray-500 mt-2">(-d 參數會讓服務在背景執行)</p>
                </li>
                 <li>
                    <p>啟動成功後，打開您的瀏覽器，前往以下網址即可開始使用：</p>
                    <pre><code><a href="http://localhost:8000" target="_blank" class="text-yellow-300 hover:underline">http://localhost:8000</a></code></pre>
                </li>
                <li>
                    <p>若要停止服務，請在同一個專案目錄下執行：</p>
                    <pre><code>docker-compose down</code></pre>
                </li>
            </ol>
        </div>

    </div>
</body>
</html>

